name: Submission of addgene kit
on: [pull_request, workflow_dispatch]

jobs:
  submit:
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - id: changed_files
        uses: jitterbit/get-changed-files@v1
      - name: List changed files
        run: |
          for changed_file in ${{ steps.changed_files.outputs.all }}; do
            echo "Do something with this ${changed_file}."
          done

    #   - name: Install Python
    #     uses: actions/setup-python@v1
    #     with:
    #       python-version: 3.11
    #   - name: Install poetry
    #     run: |
    #       python -m pip install --upgrade pip
    #       pip install poetry
    #   - name: Load cached venv
    #     id: cached-poetry-dependencies
    #     uses: actions/cache@v2
    #     with:
    #       path: .venv
    #       key: venv-${{ runner.os }}-${{ hashFiles('**/poetry.lock') }}
    #   - name: Install dependencies
    #     if: steps.cached-poetry-dependencies.outputs.cache-hit != 'true'
    #     run: poetry install --with test
    #   - name: process submission
    #     run: poetry run python process_submission.py
